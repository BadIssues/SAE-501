!
! ACCSW1 - Configuration complete (N=4)
! SAE501 - WorldSkills Lyon 2025
! Switch: WS-C2960X-24PS-L
!
version 15.2
no service pad
service timestamps debug datetime msec
service timestamps log datetime msec
service password-encryption
!
hostname ACCSW1
!
boot-start-marker
boot-end-marker
!
enable secret 5 $1$mERr$hx5rVt7rPNoS4wqbXKX7m0
!
username admin privilege 15 secret 5 $1$mERr$hx5rVt7rPNoS4wqbXKX7m0
no aaa new-model
switch 1 provision ws-c2960x-24ps-l
!
no ip domain-lookup
ip domain-name wsl2025.org
!
crypto key generate rsa modulus 2048
!
ip ssh version 2
ip ssh time-out 120
ip ssh authentication-retries 3
!
spanning-tree mode rapid-pvst
spanning-tree portfast bpduguard default
spanning-tree extend system-id
!
errdisable recovery cause psecure-violation
errdisable recovery cause bpduguard
errdisable recovery interval 30
!
vtp version 2
vtp domain wsl2025.org
vtp mode client
vtp password P@ssw0rd
!
interface FastEthernet0
 no ip address
 shutdown
!
interface GigabitEthernet1/0/1
 description TO-CORESW1-Fe1/0/2
 switchport trunk native vlan 666
 switchport trunk allowed vlan 10,20,30,99
 switchport mode trunk
 switchport nonegotiate
 spanning-tree bpduguard disable
!
interface GigabitEthernet1/0/2
 description TO-CORESW2-Fe1/0/3
 switchport trunk native vlan 666
 switchport trunk allowed vlan 10,20,30,99
 switchport mode trunk
 switchport nonegotiate
 spanning-tree bpduguard disable
!
interface GigabitEthernet1/0/3
 description HQDCSRV - VLAN10-SERVERS
 switchport access vlan 10
 switchport mode access
 switchport port-security maximum 3
 switchport port-security violation shutdown
 switchport port-security
 spanning-tree portfast
 spanning-tree bpduguard enable
!
interface GigabitEthernet1/0/4
 description VLAN20-Clients
 switchport access vlan 20
 switchport mode access
 switchport port-security maximum 3
 switchport port-security violation shutdown
 switchport port-security
 spanning-tree portfast
 spanning-tree bpduguard enable
!
interface GigabitEthernet1/0/5
 description VLAN30-DMZ
 switchport access vlan 30
 switchport mode access
 switchport port-security maximum 3
 switchport port-security violation shutdown
 switchport port-security
 spanning-tree portfast
 spanning-tree bpduguard enable
!
interface GigabitEthernet1/0/6
 description TRUNK Vers ESXI HQ
 switchport trunk native vlan 666
 switchport trunk allowed vlan 10,20
 switchport mode trunk
 switchport nonegotiate
 spanning-tree bpduguard disable
!
interface GigabitEthernet1/0/7
 description VLAN99-Management
 switchport access vlan 99
 switchport mode access
 switchport port-security maximum 3
 switchport port-security violation shutdown
 switchport port-security
 spanning-tree portfast
 spanning-tree bpduguard enable
!
interface range GigabitEthernet1/0/8-28
 description Blackhole
 switchport access vlan 666
 switchport mode access
 switchport port-security maximum 3
 switchport port-security
 shutdown
!
interface Vlan1
 no ip address
 shutdown
!
interface Vlan99
 description VLAN99-MGMT
 ip address 10.4.99.11 255.255.255.0
!
ip default-gateway 10.4.99.254
!
no ip http server
no ip http secure-server
!
ip access-list extended SSH-ACCESS
 permit tcp 10.4.99.0 0.0.0.255 any eq 22
 deny   tcp any any eq 22 log
 permit ip any any
!
banner login ^C
/!\ Restricted access. Only for authorized people /!\
^C
!
line con 0
 logging synchronous
line vty 0 4
 access-class SSH-ACCESS in
 exec-timeout 5 0
 absolute-timeout 20
 login local
 transport input ssh
line vty 5 15
 login
!
end
