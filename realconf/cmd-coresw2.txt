enable
P@ssw0rd
conf t
!
hostname CORESW2
!
enable secret P@ssw0rd
username admin privilege 15 secret P@ssw0rd
!
no ip domain-lookup
ip domain-name wsl2025.org
!
crypto key generate rsa modulus 2048
!
ip ssh version 2
!
ip routing
!
spanning-tree mode rapid-pvst
spanning-tree vlan 10,20,30,99 priority 8192
!
vtp version 2
vtp domain wsl2025.org
vtp mode server
vtp password P@ssw0rd
!
vlan 10
name Servers
vlan 20
name Clients
vlan 30
name DMZ
vlan 99
name Management
vlan 100
name CORESW1-EDGE1
vlan 200
name CORESW2-EDGE2
vlan 300
name IBGP_peering
vlan 666
name Blackhole
exit
!
track 20 interface Vlan200 line-protocol
!
interface Port-channel1
description LACP-TO-CORESW1
switchport trunk encapsulation dot1q
switchport trunk native vlan 666
switchport trunk allowed vlan 10,20,30,99,100,200,300
switchport mode trunk
switchport nonegotiate
exit
!
interface FastEthernet1/0/1
description TO-EDGE2-Gi0/1
switchport trunk encapsulation dot1q
switchport trunk native vlan 666
switchport trunk allowed vlan 30,200,300
switchport mode trunk
switchport nonegotiate
no shutdown
exit
!
interface FastEthernet1/0/2
description TO-ACCSW2-Gi3/0/1
switchport trunk encapsulation dot1q
switchport trunk native vlan 666
switchport trunk allowed vlan 10,20,30,99
switchport mode trunk
switchport nonegotiate
no shutdown
exit
!
interface FastEthernet1/0/3
description TO-ACCSW1-Gi1/0/2
switchport trunk encapsulation dot1q
switchport trunk native vlan 666
switchport trunk allowed vlan 10,20,30,99
switchport mode trunk
switchport nonegotiate
no shutdown
exit
!
interface FastEthernet1/0/4
description LACP-LINK-TO-CORESW1
switchport trunk encapsulation dot1q
switchport trunk native vlan 666
switchport trunk allowed vlan 10,20,30,99,100,200,300
switchport mode trunk
switchport nonegotiate
channel-group 1 mode active
no shutdown
exit
!
interface FastEthernet1/0/5
description LACP-LINK-TO-CORESW1
switchport trunk encapsulation dot1q
switchport trunk native vlan 666
switchport trunk allowed vlan 10,20,30,99,100,200,300
switchport mode trunk
switchport nonegotiate
channel-group 1 mode active
no shutdown
exit
!
interface range FastEthernet1/0/6-24
description UNUSED
switchport mode access
switchport access vlan 666
shutdown
exit
!
interface range GigabitEthernet1/0/1-2
description UNUSED
switchport mode access
switchport access vlan 666
shutdown
exit
!
interface Vlan10
description VLAN10-SERVERS
ip address 10.4.10.252 255.255.255.0
standby 10 ip 10.4.10.254
standby 10 priority 100
standby 10 preempt
standby 10 track 20 decrement 20
no shutdown
exit
!
interface Vlan20
description VLAN20-CLIENTS
ip address 10.4.20.252 255.255.255.0
standby 20 ip 10.4.20.254
standby 20 priority 100
standby 20 preempt
standby 20 track 20 decrement 20
no shutdown
exit
!
interface Vlan30
description VLAN30-DMZ
no ip address
shutdown
exit
!
interface Vlan99
description VLAN99-MGMT
ip address 10.4.99.252 255.255.255.0
standby 99 ip 10.4.99.254
standby 99 priority 100
standby 99 preempt
standby 99 track 20 decrement 20
no shutdown
exit
!
interface Vlan200
description LINK-TO-EDGE2
ip address 10.4.254.6 255.255.255.252
no shutdown
exit
!
ip route 0.0.0.0 0.0.0.0 10.4.254.5
!
ip access-list extended SSH-ACCESS
permit tcp 10.4.99.0 0.0.0.255 any eq 22
deny tcp any any eq 22 log
permit ip any any
exit
!
no ip http server
no ip http secure-server
!
banner login ^
/!\ Restricted access. Only for authorized people /!\
^
!
line con 0
logging synchronous
exit
!
line vty 0 4
access-class SSH-ACCESS in
exec-timeout 5 0
absolute-timeout 20
login local
transport input ssh
exit
!
end
write memory
