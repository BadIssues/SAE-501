!
! REMFW - Configuration complete (N=4)
! SAE501 - WorldSkills Lyon 2025
! Cisco CSR1000V (Virtual Router)
!
! Gi1 = vers WANRTR (VRF MAN) - 10.116.4.1
! Gi2 = vers Remote LAN - 10.4.100.126
!
version 16.9
service timestamps debug datetime msec
service timestamps log datetime msec
service password-encryption
!
hostname REMFW
!
boot-start-marker
boot-end-marker
!
enable secret 5 $1$mERr$hx5rVt7rPNoS4wqbXKX7m0
!
username admin privilege 15 secret 5 $1$mERr$hx5rVt7rPNoS4wqbXKX7m0
!
no aaa new-model
!
ip domain-name wsl2025.org
no ip domain-lookup
ip cef
no ipv6 cef
!
crypto key generate rsa modulus 2048
!
ip ssh version 2
ip ssh time-out 120
ip ssh authentication-retries 3
!
interface GigabitEthernet1
 description TO-WANRTR-Fe0/0/0 (VRF MAN)
 ip address 10.116.4.1 255.255.255.252
 ip ospf authentication message-digest
 ip ospf message-digest-key 1 md5 P@ssw0rd
 ip ospf network point-to-point
 ip access-group FIREWALL-INBOUND in
 negotiation auto
 no shutdown
!
interface GigabitEthernet2
 description TO-REMOTE-LAN
 ip address 10.4.100.126 255.255.255.128
 negotiation auto
 no shutdown
!
router ospf 1
 router-id 10.116.4.1
 area 4 nssa no-summary
 passive-interface default
 no passive-interface GigabitEthernet1
 network 10.116.4.0 0.0.0.3 area 4
 network 10.4.100.0 0.0.0.127 area 4
 default-information originate
!
ip forward-protocol nd
!
no ip http server
no ip http secure-server
!
ip route 0.0.0.0 0.0.0.0 10.116.4.2
!
ip access-list extended SSH-ACCESS
 permit tcp 10.4.99.0 0.0.0.255 any eq 22
 permit tcp 10.4.100.0 0.0.0.127 any eq 22
 deny   tcp any any eq 22 log
 permit ip any any
!
ip access-list extended FIREWALL-INBOUND
 remark === Allow established connections ===
 permit tcp any any established
 remark === Allow SSH from HQ ===
 permit tcp 10.4.0.0 0.0.255.255 any eq 22
 remark === Allow DNS ===
 permit udp any any eq domain
 permit tcp any any eq domain
 remark === Allow HTTPS ===
 permit tcp any any eq 443
 remark === Allow HTTP ===
 permit tcp any any eq 80
 remark === Allow ICMP ===
 permit icmp any any
 remark === Allow Microsoft Services ===
 permit tcp any any eq 445
 permit udp any any eq 445
 permit tcp any any range 135 139
 permit udp any any range 135 139
 remark === Allow Kerberos ===
 permit tcp any any eq 88
 permit udp any any eq 88
 remark === Allow LDAP ===
 permit tcp any any eq 389
 permit udp any any eq 389
 permit tcp any any eq 636
 remark === Allow NTP ===
 permit udp any any eq ntp
 remark === Allow OSPF ===
 permit ospf any any
 remark === Deny all other ===
 deny   ip any any log
!
banner login ^C
/!\ Restricted access. Only for authorized people /!\
^C
!
line con 0
 logging synchronous
 stopbits 1
line aux 0
 stopbits 1
line vty 0 4
 access-class SSH-ACCESS in
 exec-timeout 5 0
 absolute-timeout 20
 login local
 transport input ssh
!
end
